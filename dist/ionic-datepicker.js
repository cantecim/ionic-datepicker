"use strict";angular.module("ionic-datepicker",["ionic","ionic-datepicker.templates"]).directive("ionicDatepicker",["$ionicPopup","$locale",function(e,t){return{restrict:"AE",replace:!0,scope:{ipDate:"=idate",title:"@",setText:"@",closeText:"@",todayText:"@"},link:function(a,n){var o=t.DATETIME_FORMATS.MONTH,l=angular.copy(a.ipDate);a.weekNames=t.DATETIME_FORMATS.SHORTDAY,a.today={},a.today.dateObj=new Date,a.today.date=(new Date).getDate(),a.today.month=(new Date).getMonth(),a.today.year=(new Date).getFullYear();var r=function(e){a.selctedDateString=new Date(e).toString(),l=angular.copy(e);var t=new Date(e.getFullYear(),e.getMonth(),1).getDate(),n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();a.dayList=[];for(var r=t;n>=r;r++){var i=new Date(e.getFullYear(),e.getMonth(),r);a.dayList.push({date:i.getDate(),month:i.getMonth(),year:i.getFullYear(),day:i.getDay(),dateString:i.toString(),epochLocal:i.getTime(),epochUTC:i.getTime()+60*i.getTimezoneOffset()*1e3})}for(var t=a.dayList[0].day,c=0;t>c;c++)a.dayList.unshift({});a.rows=[],a.cols=[],a.currentMonth=o[e.getMonth()],a.currentYear=e.getFullYear(),a.numColumns=7,a.rows.length=6,a.cols.length=a.numColumns};a.prevMonth=function(){1===l.getMonth()&&l.setFullYear(l.getFullYear()),l.setMonth(l.getMonth()-1),a.currentMonth=o[l.getMonth()],a.currentYear=l.getFullYear(),r(l)},a.nextMonth=function(){11===l.getMonth()&&l.setFullYear(l.getFullYear()),l.setMonth(l.getMonth()+1),a.currentMonth=o[l.getMonth()],a.currentYear=l.getFullYear(),r(l)},a.date_selection={selected:!1,selectedDate:"",submitted:!1},a.dateSelected=function(e){a.selctedDateString=e.dateString,a.date_selection.selected=!0,a.date_selection.selectedDate=new Date(e.dateString)},n.on("click",function(){if(a.ipDate)r(angular.copy(a.ipDate));else{var t=new Date;r(t)}e.show({templateUrl:"date-picker-modal.html",title:"<strong>"+a.title+"</strong>",subTitle:"",scope:a,buttons:[{text:a.closeText},{text:a.todayText,onTap:function(e){r(new Date),e.preventDefault()}},{text:a.setText,type:"button-positive",onTap:function(){a.date_selection.submitted=!0,a.ipDate=angular.copy(a.date_selection.selected===!0?a.date_selection.selectedDate:l)}}]})})}}}]);